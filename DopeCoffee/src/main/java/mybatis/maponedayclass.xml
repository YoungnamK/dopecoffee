<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- maponedayclass.xml 파일 -->

<mapper namespace="NsOnedayClass">
	<sql id="basic_select">
		select * from onedayclasses
	</sql>

	<insert id="InsertData"  parameterType="MyOnedayclass">
		insert into onedayclasses
		(code , sell_email, type, classname
		,instructor ,person ,oneprice ,startdate 
		,enddate ,opentime ,closetime ,add_opentime1 ,add_closetime1 
		,add_opentime2 ,add_closetime2 ,zipcode ,address1 ,address2 
		,content ,main_image ,detail_image1 ,detail_image2) 
		values
		(#{code} ,#{sell_email} ,#{type} , #{classname}
		,#{instructor} ,#{person} ,#{oneprice} ,#{startdate} 
		,#{enddate} ,#{opentime} ,#{closetime} ,#{add_opentime1} ,#{add_closetime1}
		,#{add_opentime2} ,#{add_closetime2} ,#{zipcode} ,#{address1} ,#{address2} 
		,#{content} ,#{main_image} ,#{detail_image1} ,#{detail_image2})
	</insert>
	
	<select id="SelectCodeCheck" parameterType="String" resultType="Integer">
		select count(*) from onedayclasses where code=#{code}
	</select>
	

	<!-- 검색 , 키워드 별 건수를 조회함 -->
	<select id="SelectTotalCount" parameterType="String" resultType="Integer">
		select count(*) from onedayclasses 
		<if test="mode == type">
			where type like #{keyword}
		</if>
		<if test="mode == address1">
			where address1 like #{keyword}
		</if>
		<if test="classname == address1">
			where classname like #{keyword}
		</if>
	</select>
	
	<!-- 주제 / 주소 1 / 클래스명으로 목록 조회함 -->
	<select id="SelectAllData" resultType="MyOnedayclass">
		<include refid="basic_select"/>
		<if test="mode == type">
			where type like #{keyword}
		</if>
		<if test="mode == address1">
			where address1 like #{keyword}
		</if>
		<if test="classname == address1">
			where classname like #{keyword}
		</if>
		order by rownum desc
	</select>
	
	<select id="SelectOneData" parameterType="String" resultType="MyOnedayclass">
		<include refid="basic_select"/>
		where code=#{code}
	</select>
	
</mapper>